import{r as n,j as e,z as m,A as g,B as v,C as j}from"./index-D1459Nzo.js";import{A as f}from"./AdminGuard-p0RkhqR3.js";function w(){const[p,h]=n.useState([]),[a,l]=n.useState(""),[c,r]=n.useState(!1),[d,i]=n.useState(null);async function t(){h(await g())}n.useEffect(()=>{t()},[]);async function y(s){s.preventDefault(),a.trim()&&(await v(a.trim()),l(""),await t())}async function x(){i(null),r(!0);try{const s=await j();i(`Synced. Added ${s.addedCount} males. Total in round: ${s.totalMales}.`),await t()}catch(s){i((s==null?void 0:s.message)||"Sync failed")}finally{r(!1)}}return e.jsx(f,{children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"card",style:{padding:24,margin:"24px auto",maxWidth:900},children:[e.jsx("h2",{style:{marginTop:0},children:"Rounds Admin"}),e.jsxs("form",{className:"row",onSubmit:y,style:{gap:12,marginTop:12,flexWrap:"wrap"},children:[e.jsx("input",{className:"input",placeholder:"New round ID (e.g., round_oct_2025)",value:a,onChange:s=>l(s.target.value)}),e.jsx("button",{className:"btn btn-primary",type:"submit",children:"Create"})]}),e.jsx("div",{style:{height:12}}),e.jsx("div",{className:"stack",children:p.map(s=>{var o,u;return e.jsxs("div",{className:"card",style:{padding:16},children:[e.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("b",{children:s.id})," ",s.isActive?e.jsx("span",{style:{color:"#22c55e",marginLeft:8},children:"(Active)"}):null,e.jsxs("div",{style:{color:"var(--muted)",fontSize:13},children:["Males: ",((o=s.participatingMales)==null?void 0:o.length)??0," • Females: ",((u=s.participatingFemales)==null?void 0:u.length)??0]})]}),e.jsx("div",{className:"row",style:{gap:8,flexWrap:"wrap"},children:s.isActive?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-ghost",onClick:()=>m("").then(t),children:"Deactivate All"}),e.jsx("button",{className:"btn btn-primary",onClick:x,disabled:c,children:c?"Syncing…":"Sync approved males"})]}):e.jsx("button",{className:"btn btn-primary",onClick:()=>m(s.id).then(t),children:"Activate"})})]}),d&&s.isActive?e.jsx("div",{style:{marginTop:8,color:"var(--muted)"},children:d}):null]},s.id)})})]})})})}export{w as default};
