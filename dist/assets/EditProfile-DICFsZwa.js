import{u as f,r as t,j as s,N as p,F as I,I as N,i as P,k as F,m as C,d as E,b as v}from"./index-D1459Nzo.js";import{M as U}from"./MaleTabs-DW5qi8ga.js";function M(){const{user:n,profile:e,refreshProfile:g}=f(),[i,r]=t.useState((e==null?void 0:e.name)??""),[l,c]=t.useState((e==null?void 0:e.instagramId)??""),[o,d]=t.useState((e==null?void 0:e.bio)??""),[u,h]=t.useState((e==null?void 0:e.interests)??[]),[x,b]=t.useState(null),[m,j]=t.useState(!1);t.useEffect(()=>{e&&(r(e.name??""),c(e.instagramId??""),d(e.bio??""),h(e.interests??[]))},[e]);const S=async()=>{if(n)try{j(!0);let a=e==null?void 0:e.photoUrl;x&&(a=await P(n.uid,x)),await F(C(E,"users",n.uid),{name:i,instagramId:l.replace(/^@/,""),bio:o,interests:u,photoUrl:a}),await g(),v.success("Profile updated")}catch(a){v.error(a.message??"Failed to update")}finally{j(!1)}};return s.jsxs(s.Fragment,{children:[s.jsx(p,{}),s.jsxs("div",{className:"container",children:[s.jsx(U,{}),s.jsx("h2",{children:"Edit Profile"}),s.jsxs("div",{className:"form",children:[s.jsx("label",{children:"Name"}),s.jsx("input",{value:i,onChange:a=>r(a.target.value)}),s.jsx("label",{children:"Instagram"}),s.jsxs("div",{className:"ig",children:[s.jsx("span",{children:"@"}),s.jsx("input",{value:l.replace(/^@/,""),onChange:a=>c(a.target.value)})]}),s.jsx("label",{children:"Photo"}),s.jsx(I,{onFile:b,previewUrl:e==null?void 0:e.photoUrl}),s.jsx("label",{children:"Bio"}),s.jsx("textarea",{value:o,onChange:a=>d(a.target.value)}),s.jsx("label",{children:"Interests"}),s.jsx(N,{value:u,onChange:h}),s.jsx("div",{className:"actions",children:s.jsx("button",{className:"btn primary",onClick:S,disabled:m,children:m?"Saving...":"Save"})})]})]})]})}export{M as default};
